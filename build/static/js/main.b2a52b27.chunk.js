(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return g}));var a=n(15),r=n.n(a),c=n(22),u=n(17),o=n.n(u),s=n(3);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},b={register:function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:a=t.sent,i(a.data.token),n(s.a.registerSuccess(a.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(s.a.registerError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(s.a.loginRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:a=t.sent,i(a.data.token),n(s.a.loginSuccess(a.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(s.a.loginError(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(s.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:l(),t(s.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(s.a.logoutError(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),c=a.auth.token){e.next=3;break}return e.abrupt("return");case 3:return i(c),t(s.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/users/current");case 8:u=e.sent,t(s.a.getCurrentUserSuccess(u.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(s.a.getCurrentUserError(e.t0));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},g={isAuthenticated:function(e){return e.auth.token},getUserEmail:function(e){return e.auth.user.email}};n(20)},19:function(e,t,n){"use strict";var a=n(1),r=Object(a.b)("@contact/getRequest"),c=Object(a.b)("@contact/getSuccess"),u=Object(a.b)("@contact/getError"),o=Object(a.b)("@contact/addRequest"),s=Object(a.b)("@contact/addSuccess"),i=Object(a.b)("@contact/addError"),l=Object(a.b)("@contact/deleteRequest"),b=Object(a.b)("@contact/deleteSuccess"),g=Object(a.b)("@contact/deleteError"),d=Object(a.b)("@contact/filter",(function(e){return{payload:e.target.value}}));t.a={getContactsRequest:r,getContactsSuccess:c,getContactsError:u,addContactRequest:o,addContactSuccess:s,addContactError:i,deleteContactRequest:l,deleteContactSuccess:b,deleteContactError:g,handleFilter:d}},20:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a,r,c,u=n(6),o=n(5),s=n(1),i=n(48),l=n.n(i),b=n(3),g={name:null,email:null},d=Object(s.c)(g,(a={},Object(u.a)(a,b.a.registerSuccess,(function(e,t){return t.payload.user})),Object(u.a)(a,b.a.loginSuccess,(function(e,t){return t.payload.user})),Object(u.a)(a,b.a.logoutSuccess,(function(){return g})),Object(u.a)(a,b.a.getCurrentUserSuccess,(function(e,t){return t.payload})),a)),p=Object(s.c)(null,(r={},Object(u.a)(r,b.a.registerSuccess,(function(e,t){return t.payload.token})),Object(u.a)(r,b.a.loginSuccess,(function(e,t){return t.payload.token})),Object(u.a)(r,b.a.logoutSuccess,(function(){return null})),r)),f=Object(s.c)(null,(c={},Object(u.a)(c,b.a.registerError,(function(e,t){return t.payload})),Object(u.a)(c,b.a.loginError,(function(e,t){return t.payload})),Object(u.a)(c,b.a.logoutError,(function(e,t){return t.payload})),Object(u.a)(c,b.a.getCurrentUserError,(function(e,t){return t.payload})),c)),m={key:"auth",storage:l.a,whiteList:["token"]};t.b=Object(o.c)({user:d,token:p,error:f})},3:function(e,t,n){"use strict";var a=n(1),r=Object(a.b)("@auth/registerRequest"),c=Object(a.b)("@auth/registerSuccess"),u=Object(a.b)("@auth/registerError"),o=Object(a.b)("@auth/loginRequest"),s=Object(a.b)("@auth/loginSuccess"),i=Object(a.b)("@auth/loginError"),l=Object(a.b)("@auth/logoutRequest"),b=Object(a.b)("@auth/logoutSuccess"),g=Object(a.b)("@auth/logoutError"),d=Object(a.b)("@auth/getCurrentUserRequest"),p=Object(a.b)("@auth/getCurrentUserSuccess"),f=Object(a.b)("@auth/getCurrentUserError");t.a={registerRequest:r,loginRequest:o,logoutRequest:l,getCurrentUserRequest:d,registerError:u,loginError:i,logoutError:g,getCurrentUserError:f,registerSuccess:c,loginSuccess:s,logoutSuccess:b,getCurrentUserSuccess:p}},35:function(e,t,n){"use strict";var a,r=n(6),c=n(49),u=n(5),o=n(1),s=n(19),i=Object(o.c)([],(a={},Object(r.a)(a,s.a.getContactsSuccess,(function(e,t){return t.payload})),Object(r.a)(a,s.a.addContactSuccess,(function(e,t){var n=t.payload;return[].concat(Object(c.a)(e),[n])})),Object(r.a)(a,s.a.deleteContactSuccess,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),a)),l=Object(o.c)("",Object(r.a)({},s.a.handleFilter,(function(e,t){return t.payload})));t.a=Object(u.c)({items:i,filter:l})},50:function(e,t,n){e.exports=n(84)},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),u=n.n(c),o=n(11),s=n(47),i=n(1),l=n(16),b=n(35),g=n(20),d=Object(i.a)({reducer:{contacts:b.a,auth:Object(l.g)(g.a,g.b)},devTools:!1,middleware:Object(i.d)({serializableCheck:{ignoredActions:[l.a,l.f,l.e,l.b,l.c,l.d]}})}),p=Object(l.h)(d),f=n(31),m=n(32),h=n(34),j=n(33),O=n(4),v=n(14),E=[{path:"/",label:"Home",exact:!0,component:Object(a.lazy)((function(){return n.e(7).then(n.bind(null,96))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(a.lazy)((function(){return n.e(5).then(n.bind(null,97))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(a.lazy)((function(){return n.e(4).then(n.bind(null,98))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(a.lazy)((function(){return Promise.all([n.e(6),n.e(3)]).then(n.bind(null,99))})),private:!0,restricted:!1}],k=n(13),C=n(26),y=Object(o.b)((function(e){return{isAuthenticated:k.b.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=Object(C.a)(e,["component","isAuthenticated"]);return r.a.createElement(O.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(O.a,{to:"/login"})}}))})),S=Object(o.b)((function(e){return{isAuthenticated:k.b.isAuthenticated(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,a=e.restricted,c=Object(C.a)(e,["component","isAuthenticated","restricted"]);return r.a.createElement(O.b,Object.assign({},c,{render:function(e){return n&&a?r.a.createElement(O.a,{to:"/contacts"}):r.a.createElement(t,e)}}))})),R=Object(o.b)((function(e){return{email:k.b.getUserEmail(e),avatar:"https://img1.freepng.ru/20180519/lea/kisspng-jack-black-kung-fu-panda-showdown-of-legendary-le-5affe1a46e1027.5440406515267188844508.jpg"}}),{onLogout:k.a.logOut})((function(e){var t=e.avatar,n=e.email,a=e.onLogout;return r.a.createElement("div",{className:"avatar-wrapper"},r.a.createElement("div",{className:"account-avatar"},r.a.createElement("img",{className:"avatar avatar--hover",src:t,alt:"User avatar",width:"44",height:"44"})),r.a.createElement("span",{className:"account-title"},n),r.a.createElement("button",{className:"logout-btn",type:"button",onClick:a},"Logout"))})),x=(n(81),Object(o.b)((function(e){return{isAuthenticated:k.b.isAuthenticated(e)}}))((function(e){var t=e.isAuthenticated;return r.a.createElement("div",{className:"header"},r.a.createElement(v.b,{exact:!0,to:"/",className:"navigation-link",activeClassName:"navigation-link-active"},"Home"),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(v.b,{to:"/contacts",className:"navigation-link",activeClassName:"navigation-link-active"},"Contacts")," ",r.a.createElement(R,null)," "):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.b,{to:"/login",className:"navigation-link",activeClassName:"navigation-link-active"},"Login"),r.a.createElement(v.b,{to:"/register",className:"navigation-link",activeClassName:"navigation-link-active"},"Registration")))}))),U=(n(82),function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(x,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement("h1",null,"Loading...")},r.a.createElement(O.d,null,E.map((function(e){return e.private?r.a.createElement(y,Object.assign({key:e.label},e)):r.a.createElement(S,Object.assign({key:e.label},e,{restricted:e.restricted}))})))))}}]),n}(a.Component)),q=Object(o.b)(null,{onGetCurrentUser:k.a.getCurrentUser})(U);n(83);u.a.render(r.a.createElement(o.a,{store:d},r.a.createElement(s.a,{loading:null,persistor:p},r.a.createElement(q,null))),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.b2a52b27.chunk.js.map